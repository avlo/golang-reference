////////////////////////////////////////////////
// Read your "hello-world" message on the Tangle
////////////////////////////////////////////////

package main

import (
	"fmt"

	"github.com/iotaledger/iota.go/api"
	"github.com/iotaledger/iota.go/transaction"
	"github.com/iotaledger/iota.go/trinary"
)

var node = "http://0.0.0.0:14265"

// use console output (tail transaction hash) from 001_hello-world_write-to-tangle.go
// const tailTransactionHash = trinary.Trytes("FQPZPJFVHAWANYQFAOZZBUTGVEJUSTISQPWMVNGIY9TJOIBRRGBETBQ9JHDQWXMBQVXQWE9VBVCMOY999")
const tailTransactionHash = trinary.Trytes("WJMZTKXFZNNZKEOPEEKCZLMKRSXKXCLYIINPDWTJTSQWOHEFUEYJALXBMNCYPFATHASSTQKEUUMYPL999")

func main() {
	// api settings req'd for connecting to a network
	apiRet, err := api.ComposeAPI(api.HTTPClientSettings{URI: node})
	must(err)

	// Get the transactions in your bundle
	bundle, err := apiRet.GetBundle(tailTransactionHash)
	must(err)

	jsonMsg, err := transaction.ExtractJSON(bundle)
	must(err)
	fmt.Println(jsonMsg)
}

func must(err error) {
	if err != nil {
		panic(err)
	}
}
